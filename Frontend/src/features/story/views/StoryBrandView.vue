<template>
  <div class="subWrap">
    <CommonHeader />
    
    <div class="contentsWrap">
      <div class="cont_min_area">
        <div class="web_container">
          <!-- Page Title -->
          <div class="title_page WEB">
            <h2 class="tit">ë¸Œëœë“œ</h2>
          </div>

          <!-- Burger King Global Section -->
          <div class="card01 intro_image break_web">
            <div class="cont_group">
              <div class="card_head">
                <h2 class="tit_card cen">ë²„ê±°í‚¹ GLOBAL</h2>
              </div>
              <div class="card_cont">
                <p class="txt01">
                  ì„¸ê³„ ìµœëŒ€ QSR(Quick Service Restaurant) ë¸Œëœë“œ ì¤‘ í•˜ë‚˜ì¸ ë²„ê±°í‚¹ì€ 
                  <span class="txt_underline">1954ë…„ ë¯¸êµ­ ë§ˆì´ì• ë¯¸</span>ì—ì„œ James W.McLamoreì™€ David Edgertonì— ì˜í•´ ì„¤ë¦½ë˜ì—ˆìŠµë‹ˆë‹¤.<br><br>
                  ë²„ê±°í‚¹ì€ í˜„ì¬ 100ê°œ ì´ìƒì˜ êµ­ê°€ì—ì„œ 19,500ê°œ ì´ìƒì˜ ë§¤ì¥ì„ ìš´ì˜í•˜ê³  ìˆìŠµë‹ˆë‹¤.<br><br>
                  ê³ ê¸°ë¥¼ íŒ¬ì— êµ½ëŠ” ì¼ë°˜ QSRê³¼ëŠ” ë‹¬ë¦¬, 
                  <span class="txt_underline">ë²„ê±°í‚¹ì€ ê³ ê¸°ë¥¼ ì§ì ‘ ë¶ˆì— êµ¬ì›Œ ì¡°ë¦¬í•˜ëŠ” ì§í™” ë°©ì‹ (Flame-grilling)ìœ¼ë¡œ ë‹´ë°±í•˜ê³  í’ë¶€í•œ ë§›ê³¼ í–¥,</span> 
                  ê·¸ë¦¬ê³  ì •í†µ í–„ë²„ê±°ì˜ í’ë¯¸ë¥¼ ì„ ë³´ì´ê³  ìˆìŠµë‹ˆë‹¤.<br><br>
                  ë²„ê±°í‚¹ì˜ ëŒ€í‘œ ì œí’ˆì¸ ì™€í¼(Whopper)ëŠ” 100% ìˆœ ì‡ ê³ ê¸° íŒ¨í‹°ì™€ í•¨ê»˜ ì–‘ìƒì¶”, í† ë§ˆí† , ì–‘íŒŒ, í”¼í´ ë“± 4ê°€ì§€ ì‹ ì„ í•œ ì•¼ì±„ê°€ ì–´ìš°ëŸ¬ì§„ í’ë¶€í•œ ë§›ìœ¼ë¡œ ì „ì„¸ê³„ ê³ ê°ì—ê²Œ ì‚¬ë‘ ë°›ê³  ìˆìŠµë‹ˆë‹¤.
                </p>
              </div>
            </div>
            <div class="card_image_area">
              <img 
                v-if="images.pastStore" 
                :src="images.pastStore" 
                alt="Burger King Global" 
                class="MOB"
                @load="handleImageLoad('pastStore')"
                @error="handleImageError('pastStore')"
              >
              <img 
                v-if="images.pastStore" 
                :src="images.pastStore" 
                alt="Burger King Global" 
                class="WEB"
                @load="handleImageLoad('pastStore')"
                @error="handleImageError('pastStore')"
              >
            </div>
          </div>

          <!-- Burger King Korea Section -->
          <div class="card01 intro_image break_web">
            <div class="cont_group">
              <div class="card_head">
                <h2 class="tit_card cen">ë²„ê±°í‚¹ KOREA</h2>
              </div>
              <div class="card_cont">
                <p class="txt01">
                  <span class="txt_underline">ë²„ê±°í‚¹ ì½”ë¦¬ì•„ëŠ” ì§€ë‚œ 1984ë…„ ì¢…ë¡œì ì„ ì˜¤í”ˆ</span>í•˜ë©° í•œêµ­ì— ì§„ì¶œí•œ ì´ë˜, 
                  ì°¨ë³„í™”ëœ ì œí’ˆê³¼ ê°œì„± ìˆëŠ” ë§¤ì¥ ì¸í…Œë¦¬ì–´ë¡œ ì§€ë‚œ 39ë…„ê°„ í•œêµ­ ì†Œë¹„ìì˜ ì‚¬ë‘ì„ ë°›ì•„ì˜¤ê³  ìˆìŠµë‹ˆë‹¤.<br><br>
                  "ê°€ì¥ ë§›ìˆëŠ” í–„ë²„ê±°ë¥¼ ì œê³µí•˜ëŠ” í”„ë¦¬ë¯¸ì—„ QSR ë¸Œëœë“œ"ë¡œ ìë¦¬ë§¤ê¹€í•œ ë²„ê±°í‚¹ì€ í˜„ì¬ 
                  <span class="txt_underline">ì „êµ­ 490ê°œ </span>(2024ë…„ 3ì›” ê¸°ì¤€) ë§¤ì¥ì„ ìš´ì˜í•˜ê³  ìˆìŠµë‹ˆë‹¤.<br><br>
                  <span class="txt_underline">ì¢‹ì€ í’ˆì§ˆì˜ ì œí’ˆ(Quality)ê³¼ ì¹œì ˆí•œ ì„œë¹„ìŠ¤ (Service) ê·¸ë¦¬ê³  ì²­ê²°í•œ ë§¤ì¥(Cleanliness)</span>ì€ 
                  ê³ ê° ì—¬ëŸ¬ë¶„ê»˜ ë” í° ë§Œì¡±ì„ ë“œë¦¬ê³ ì ë…¸ë ¥í•˜ëŠ” ë²„ê±°í‚¹ì˜ ì•½ì†ì´ì ê°€ì¹˜ì…ë‹ˆë‹¤.<br><br>
                  ë”ìš± í’ì„±í•˜ê³  ë§›ìˆëŠ” ì œí’ˆê³¼ ì •ì„±ì„ ë‹¤í•˜ëŠ” ê³ ê° ì„œë¹„ìŠ¤ë¡œ ì—¬ëŸ¬ë¶„ê»˜ ë”ìš± ê°€ê¹Œì´ ë‹¤ê°€ê°€ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.
                </p>
              </div>
            </div>
            <div class="card_image_area">
              <img 
                v-if="images.currentStore" 
                :src="images.currentStore" 
                alt="Burger King Korea" 
                class="MOB"
                @load="handleImageLoad('currentStore')"
                @error="handleImageError('currentStore')"
              >
              <img 
                v-if="images.currentStore" 
                :src="images.currentStore" 
                alt="Burger King Korea" 
                class="WEB"
                @load="handleImageLoad('currentStore')"
                @error="handleImageError('currentStore')"
              >
            </div>
          </div>

          <!-- BKR Company Info Section -->
          <div class="info_section">
            <div class="card01 intro_image break_web">
              <div class="cont_group">
                <div class="card_head">
                  <h1 class="tit_card cen">BKR íšŒì‚¬ ì •ë³´</h1>
                </div>
                <div class="card_cont">
                  <div class="dlist01 company_info">
                    <dl>
                      <dt>ì‚¬ëª…</dt>
                      <dd class="text_right"><span>ì£¼ì‹íšŒì‚¬ ë¹„ì¼€ì´ì•Œ</span></dd>
                    </dl>
                    <dl>
                      <dt>ëŒ€í‘œì</dt>
                      <dd class="text_right"><span>ì´ë™í˜•</span></dd>
                    </dl>
                    <dl>
                      <dt>ì„¤ë¦½</dt>
                      <dd class="text_right"><span>2012.11.21</span></dd>
                    </dl>
                    <dl>
                      <dt>ì‚¬ì—…ë‚´ìš©</dt>
                      <dd class="text_right"><span>í”¼ì, í–„ë²„ê±°, ìƒŒë“œìœ„ì¹˜ ë° ìœ ì‚¬ ìŒì‹ì ì—…</span></dd>
                    </dl>
                    <dl>
                      <dt>ì „í™”ë²ˆí˜¸</dt>
                      <dd class="text_right">
                        <span>080-022-8163</span>
                        <p class="txt_info">
                          ìƒë‹´ ê°€ëŠ¥ ì‹œê°„ : í‰ì¼ ì˜¤ì „ 9ì‹œ ~ ì˜¤í›„ 6ì‹œ<br>
                          (í† ,ì¼,ê³µíœ´ì¼ íœ´ë¬´)
                        </p>
                      </dd>
                    </dl>
                    <dl>
                      <dt>ì†Œì¬ì§€</dt>
                      <dd class="text_right"><span>ì„œìš¸ì‹œ ì¢…ë¡œêµ¬ ì‚¼ë´‰ë¡œ 71 Gíƒ€ì›Œ 4, 5ì¸µ</span></dd>
                    </dl>
                  </div>
                </div>
              </div>
              <div class="card_image_area map_wrap">
                <div class="map_w">
                  <img 
                    v-if="images.map" 
                    :src="images.map" 
                    alt="BKR íšŒì‚¬ ìœ„ì¹˜" 
                    class="map_image"
                    @load="handleImageLoad('map')"
                    @error="handleImageError('map')"
                  >
                  <div v-else class="map_placeholder">
                    <p>ğŸ“ ì„œìš¸ì‹œ ì¢…ë¡œêµ¬ ì‚¼ë´‰ë¡œ 71 Gíƒ€ì›Œ</p>
                    <p class="map_note">ì§€ë„ ì´ë¯¸ì§€ ë¡œë”©ì¤‘...</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <CommonFooter />
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue';
import CommonHeader from '@/components/CommonHeader.vue';
import CommonFooter from '@/components/CommonFooter.vue';
import storyApi from '@/api/story';
import '@/assets/brand.css';

// ì´ë¯¸ì§€ URL ë° ë¡œë”© ìƒíƒœ
const images = ref({
  pastStore: '',
  currentStore: '',
  map: '',
  loading: {
    pastStore: true,
    currentStore: true,
    map: true
  },
  error: {
    pastStore: false,
    currentStore: false,
    map: false
  }
});

// ì´ë¯¸ì§€ ë¡œë“œ ê²°ê³¼ ì²˜ë¦¬
const handleImageError = (key) => {
  console.error(`ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨ (${key}):`, images.value[key]);
  images.value.error[key] = true;
  images.value.loading[key] = false;
  
  // í´ë°± ì´ë¯¸ì§€ ì„¤ì •
  if (key === 'pastStore') {
    images.value.pastStore = 'https://via.placeholder.com/1200x500/502314/FFFFFF?text=Burger+King+Global+Fallback';
  } else if (key === 'currentStore') {
    images.value.currentStore = 'https://via.placeholder.com/1200x500/E2221F/FFFFFF?text=Burger+King+Korea+Fallback';
  }
};

const handleImageLoad = (key) => {
  console.log(`ì´ë¯¸ì§€ ë¡œë“œ ì„±ê³µ (${key}):`, images.value[key]);
  images.value.loading[key] = false;
  images.value.error[key] = false;
};

// ì´ë¯¸ì§€ ë¡œë“œ
onMounted(async () => {
  try {
    console.log('ì´ë¯¸ì§€ API í˜¸ì¶œ ì‹œì‘ - FileType: BRAND');
    const response = await storyApi.getImagesByType('BRAND');
    console.log('API ì‘ë‹µ ìˆ˜ì‹ :', response.data);
    
    if (response.data && response.data.data) {
      const imageList = response.data.data;
      console.log('ë¸Œëœë“œ ì´ë¯¸ì§€ ë¦¬ìŠ¤íŠ¸:', imageList.map(img => img.originalFileName));
      
      // íŒŒì¼ëª…ìœ¼ë¡œ ì´ë¯¸ì§€ ë§¤í•‘
      imageList.forEach(img => {
        if (img.originalFileName === 'pastStore.png') {
          images.value.pastStore = img.fileUrl;
          console.log('pastStore URL ì„¤ì •ë¨');
        } else if (img.originalFileName === 'currentStore.png') {
          images.value.currentStore = img.fileUrl;
          console.log('currentStore URL ì„¤ì •ë¨');
        } else if (img.originalFileName === 'map.png') {
          images.value.map = img.fileUrl;
          console.log('map URL ì„¤ì •ë¨');
        }
      });
    } else {
      console.warn('API ì‘ë‹µì— ì´ë¯¸ì§€ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.');
    }
  } catch (error) {
    console.error('ë¸Œëœë“œ ì´ë¯¸ì§€ API í˜¸ì¶œ ì‹¤íŒ¨:', error);
    // í´ë°± ì´ë¯¸ì§€ ì„¤ì •
    handleImageError('pastStore');
    handleImageError('currentStore');
    handleImageError('map');
  }
});
</script>

<style scoped>
/* Global Box Sizing */
* { box-sizing: border-box; }

/* CSS Reset */
dd, dl, dt, em, figure, h1, h2, h3, h4, h5, h6, li, ol, p, ul {
  margin: 0;
  padding: 0;
}

/* SubWrap */
.subWrap {
  min-height: 100%;
  display: flex;
  flex-direction: column;
  background-color: var(--bg-base);
  overflow: auto;
}

/* Contents Wrapper */
.contentsWrap {
  position: relative;
  flex: 1;
  overflow: auto;
  padding: 20px 20px 0;
}

.cont_min_area {
  min-height: calc(100vh - 166px);
}

@media screen and (min-width: 640px) {
  .contentsWrap {
    padding: 30px 30px 0;
  }
}

@media screen and (min-width: 1024px) {
  .contentsWrap {
    padding: 40px 60px 0;
    overflow: initial;
  }
  
  .cont_min_area {
    min-height: calc(100vh - 444px);
  }
}

/* Web Container */
.web_container {
  max-width: 1200px;
  margin: 0 auto;
}

/* Page Title */
.title_page {
  margin-bottom: 30px;
  font-size: 1.1875rem;
  text-align: center;
}

.title_page .tit {
  color: #502314;
  font-weight: 900;
}

@media screen and (min-width: 1024px) {
  .title_page {
    margin-top: 40px;
    margin-bottom: 50px;
    font-size: 2.125rem;
  }
}

/* Card Styles */
.card01 {
  background: #fff;
  border-radius: 12px;
  overflow: hidden;
  margin-bottom: 30px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.intro_image {
  display: flex;
  flex-direction: column;
}

@media screen and (min-width: 1024px) {
  .intro_image.break_web {
    flex-direction: row;
  }
  
  .intro_image.break_web .cont_group {
    flex: 1;
    padding: 40px;
  }
  
  .intro_image.break_web .card_image_area {
    flex: 1;
  }
}

.cont_group {
  padding: 30px 20px;
}

.card_head {
  margin-bottom: 20px;
}

.tit_card {
  font-size: 1.5rem;
  font-weight: 900;
  color: #502314;
}

.tit_card.cen {
  text-align: center;
}

@media screen and (min-width: 1024px) {
  .tit_card {
    font-size: 2rem;
  }
}

.card_cont {
  margin-top: 20px;
}

.txt01 {
  font-size: 0.9375rem;
  line-height: 1.8;
  color: #333;
}

@media screen and (min-width: 1024px) {
  .txt01 {
    font-size: 1.0625rem;
  }
}

.txt_underline {
  text-decoration: underline;
  text-decoration-color: #E2221F;
  text-decoration-thickness: 2px;
  text-underline-offset: 3px;
  font-weight: 600;
}

/* Card Image Area */
.card_image_area {
  width: 100%;
  min-height: 250px;
}

.card_image_area img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.MOB {
  display: block !important;
}

.WEB {
  display: none !important;
}

@media screen and (min-width: 1024px) {
  .MOB {
    display: none !important;
  }
  
  .WEB {
    display: block !important;
  }
}

/* Company Info Definition List */
.dlist01 {
  margin-top: 20px;
}

.dlist01 dl {
  display: flex;
  padding: 15px 0;
  border-bottom: 1px solid #e0e0e0;
}

.dlist01 dl:first-child {
  border-top: 1px solid #e0e0e0;
}

.dlist01 dt {
  flex: 0 0 120px;
  font-weight: 600;
  color: #502314;
}

.dlist01 dd {
  flex: 1;
  color: #333;
}

.dlist01 .text_right {
  text-align: right;
}

@media screen and (min-width: 1024px) {
  .dlist01 dt {
    flex: 0 0 150px;
  }
}

.txt_info {
  margin-top: 8px;
  font-size: 0.875rem;
  color: #666;
  line-height: 1.6;
}

/* Map Wrapper */
.map_wrap {
  background: #f8f9fa;
}

.map_w {
  width: 100%;
  height: 100%;
  min-height: 300px;
}

.map_placeholder {
  width: 100%;
  height: 100%;
  min-height: 300px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  font-size: 1.125rem;
  font-weight: 600;
  text-align: center;
  padding: 20px;
}

.map_placeholder p {
  margin: 10px 0;
}

.map_note {
  font-size: 0.875rem;
  opacity: 0.8;
  font-weight: 400;
}

.map_image {
  width: 100%;
  height: 100%;
  min-height: 300px;
  object-fit: cover;
  display: block;
}

@media screen and (min-width: 1024px) {
  .map_w {
    min-height: 400px;
  }
  
  .map_placeholder {
    min-height: 400px;
  }
  
  .map_image {
    min-height: 400px;
  }
}
</style>
